<script>
    import ModelCard from '../components/ModelCard.svelte';

    export let modelFiltering;

    import { onMount } from 'svelte';
  
    let isBMBF = false;

	onMount(async () => {
        if(window.navigator.userAgent.toLowerCase().indexOf('bmbf_quest') > -1){
        isBMBF = true;
        }
	});
</script>

<script context="module">
    export const prerender = true; // important for static sites
    import data from "../data/data.json";

    export const allData = data;
</script>

<div class="mx-auto w-[90%] 2xl:w-[75%] pt-32 pb-2 sm:pt-16 sm:pb-16" align="center">
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8003053308644369"
    crossorigin="anonymous"></script> -->
    <!-- Responsive ad unit -->
    <!-- <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-8003053308644369"
        data-ad-slot="3670690695"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->
    <div id="953660264">

        <script type="text/javascript">
    
            try {
    
                window._mNHandle.queue.push(function (){
    
                    window._mNDetails.loadTag("953660264", "970x250", "953660264");
    
                });
    
            }
    
            catch (error) {}
    
        </script>
    </div>
</div>

<div class="grid mx-auto w-auto grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 w-[90%] 2xl:w-[75%] pb-0 gap-8 container">

    {#each allData as item}
        {#if item.hidden !== true && item.hidden !== "true"}
            {#if item.type === modelFiltering || modelFiltering === 'all'}
                <ModelCard imageURL="{item.image_name}" imageAltText="{item.endpoint}" downloadLink="{item.file_name}" detailsLink="{item.endpoint}"></ModelCard>
            {/if}
        {/if}
    {/each}

</div>

<style global>
    @tailwind base;
    @tailwind components;
    @tailwind utilities;

    .container{
        justify-content: center !important;
        justify-items: center !important;
        align-content: center !important;
        align-items: center !important;
    }

    body{
        background-color: #121212;
        min-height: 100%;
    }

    p, button{
        font-family: 'Inter', sans-serif;
        color: white;
    }
</style>

<svelte:head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    {#if modelFiltering == "all"}
        <title>Bobbie's Quest Model Site</title>
        <meta name="description" content="Download Bobbie's quest model packs, notes, walls, and more!">

        <meta content="Bobbie's Quest Model Site" property="og:title">
        <meta content="Download Bobbie's quest model packs, notes, walls, and more!" property="og:description">
    {:else}
        <title>{(modelFiltering.charAt(0).toUpperCase() + modelFiltering.slice(1)+"s").replace('Miscs', 'Misc Models')}</title>

        <meta content={(modelFiltering.charAt(0).toUpperCase() + modelFiltering.slice(1)+"s").replace('Miscs', 'Misc Models')} property="og:title">
        <meta name="description" content={`Download Bobbie's Custom ${(modelFiltering.charAt(0).toUpperCase() + modelFiltering.slice(1)+"s").replace('Miscs', 'Misc Models')} for the Quest version of Beat Saber.`}>
        <meta content="Download Bobbie's Custom {(modelFiltering.charAt(0).toUpperCase() + modelFiltering.slice(1)+"s").replace('Miscs', 'Misc Models')} for the Quest version of Beat Saber." property="og:description">
    {/if}    

    <meta content="https://quest.bobbie.dev/bobbie.png" property="og:image">
    <meta content="quest.bobbie.dev" property="og:site_name">
    <meta name="theme-color" content="#202020">
    <meta name="twitter:card" value="summary">
</svelte:head>